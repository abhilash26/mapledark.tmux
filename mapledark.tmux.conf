#!/usr/bin/env bash
# ============================================================================
# Maple Dark Theme for Tmux
# ============================================================================
# A performance-optimized tmux theme using the Maple Dark color scheme
# Pure tmux configuration - no plugins required
# ============================================================================

# ============================================================================
# Color Definitions (from colors.json)
# ============================================================================
BACKGROUND="#1e1e1f"
FOREGROUND="#cbd5e1"
BRIGHT_BLACK="#666666"
BRIGHT_BLUE="#a8e0ff"
BRIGHT_CYAN="#bafffe"
BRIGHT_GREEN="#bdf8c7"
BRIGHT_PURPLE="#ebe5ff"
BRIGHT_RED="#ffc4c4"
BRIGHT_WHITE="#ffffff"
BRIGHT_YELLOW="#ffe8b9"
BLACK="#333333"
BLUE="#8fc7ff"
CYAN="#a1e8e5"
GREEN="#a4dfae"
PURPLE="#d2ccff"
RED="#edabab"
WHITE="#f3f2f2"
YELLOW="#eecfa0"

# ============================================================================
# Icon Configuration
# ============================================================================
# Set TMUX_ICON_MODE to "nerd" or "ascii" to choose icon set
# Default: nerd (requires Nerd Fonts)
# Change to "ascii" for plain text compatibility
%hidden ICON_MODE="#{?TMUX_ICON_MODE,#{TMUX_ICON_MODE},nerd}"

# ============================================================================
# Focus Mode Configuration
# ============================================================================
# Initialize focus mode as disabled (0)
# Toggle with: prefix + F
setenv -g TMUX_FOCUS_MODE 0
setenv -g TMUX_ICON_MODE "nerd"

# ============================================================================
# General Status Bar Settings
# ============================================================================
set -g status on
set -g status-position bottom
set -g status-justify left
set -g status-interval 5
set -g status-style "bg=#1e1e1f,fg=#cbd5e1"

# Status bar lengths
set -g status-left-length 50
set -g status-right-length 150

# ============================================================================
# Pane Border Styling
# ============================================================================
set -g pane-border-style "fg=#666666"
set -g pane-active-border-style "fg=#8fc7ff"

# Pane number display
set -g display-panes-colour "#666666"
set -g display-panes-active-colour "#8fc7ff"

# ============================================================================
# Window Styling
# ============================================================================
set -g window-style "fg=#cbd5e1"
set -g window-active-style "fg=#ffffff"

# ============================================================================
# Message Styling
# ============================================================================
set -g message-style "bg=#333333,fg=#cbd5e1"
set -g message-command-style "bg=#333333,fg=#8fc7ff"

# ============================================================================
# Copy Mode Styling
# ============================================================================
set -g mode-style "bg=#8fc7ff,fg=#1e1e1f"

# ============================================================================
# Clock Mode
# ============================================================================
set -g clock-mode-colour "#8fc7ff"
set -g clock-mode-style 24

# ============================================================================
# Status Left: Session Name + Window List
# ============================================================================
# Nerd Font Icons
set -g @icon-session-nerd ""
set -g @icon-window-nerd ""
set -g @sep-left-nerd ""
set -g @sep-right-nerd ""

# ASCII Icons
set -g @icon-session-ascii "[S]"
set -g @icon-window-ascii "#"
set -g @sep-left-ascii "|"
set -g @sep-right-ascii ">"

# Status left format with conditional icons
set -g status-left "\
#{?#{==:#{TMUX_ICON_MODE},nerd},#[fg=#1e1e1f]#[bg=#8fc7ff]#[bold] #{@icon-session-nerd} ,\
#[fg=#1e1e1f]#[bg=#8fc7ff]#[bold] #{@icon-session-ascii} }\
#[fg=#1e1e1f]#[bg=#8fc7ff]#[bold]#S \
#{?#{==:#{TMUX_ICON_MODE},nerd},#[fg=#8fc7ff]#[bg=#1e1e1f]#{@sep-left-nerd},\
#[fg=#8fc7ff]#[bg=#1e1e1f]#{@sep-left-ascii}} \
#[fg=#cbd5e1]#[bg=#1e1e1f]"

# ============================================================================
# Window Status Format
# ============================================================================
# Window flags: * = current, - = last, # = activity, ! = bell, Z = zoomed

# Inactive window format
set -g window-status-format "\
#[fg=#666666]#[bg=#1e1e1f] \
#{?#{==:#{TMUX_ICON_MODE},nerd},#{@icon-window-nerd},#{@icon-window-ascii}} \
#[fg=#eecfa0]#I\
#[fg=#666666]:\
#[fg=#cbd5e1]#W\
#[fg=#edabab]#{?window_flags,#{window_flags}, } "

# Active window format
set -g window-status-current-format "\
#[fg=#1e1e1f]#[bg=#eecfa0]#[bold] \
#{?#{==:#{TMUX_ICON_MODE},nerd},#{@icon-window-nerd},#{@icon-window-ascii}} \
#[fg=#1e1e1f]#I\
#[fg=#1e1e1f]:\
#[fg=#1e1e1f]#W\
#[fg=#edabab]#{?window_flags,#{window_flags}, } \
#[fg=#eecfa0]#[bg=#1e1e1f]#{?#{==:#{TMUX_ICON_MODE},nerd},#{@sep-left-nerd},#{@sep-left-ascii}}"

# Window status styling
set -g window-status-style "fg=#cbd5e1,bg=#1e1e1f"
set -g window-status-current-style "fg=#1e1e1f,bg=#eecfa0,bold"
set -g window-status-activity-style "fg=#edabab,bg=#1e1e1f"
set -g window-status-bell-style "fg=#ffc4c4,bg=#1e1e1f,bold"
set -g window-status-separator ""

# ============================================================================
# Status Right: Directory, Username, Hostname, Date/Time
# ============================================================================
# Icons
set -g @icon-dir-nerd ""
set -g @icon-user-nerd ""
set -g @icon-host-nerd ""
set -g @icon-clock-nerd ""

set -g @icon-dir-ascii "DIR"
set -g @icon-user-ascii "@"
set -g @icon-host-ascii ">>"
set -g @icon-clock-ascii ""

# Full status right (normal mode)
set -g @status-right-full "\
#[fg=#a4dfae]#[bg=#1e1e1f]#{?#{==:#{TMUX_ICON_MODE},nerd},#{@sep-right-nerd},#{@sep-right-ascii}}\
#[fg=#1e1e1f]#[bg=#a4dfae]#[bold] \
#{?#{==:#{TMUX_ICON_MODE},nerd},#{@icon-dir-nerd} ,#{@icon-dir-ascii} }\
#[fg=#1e1e1f]#{b:pane_current_path} \
#[fg=#d2ccff]#[bg=#1e1e1f]#{?#{==:#{TMUX_ICON_MODE},nerd},#{@sep-right-nerd},#{@sep-right-ascii}}\
#[fg=#1e1e1f]#[bg=#d2ccff]#[bold] \
#{?#{==:#{TMUX_ICON_MODE},nerd},#{@icon-user-nerd} ,#{@icon-user-ascii}}\
#[fg=#1e1e1f]#(whoami) \
#[fg=#a1e8e5]#[bg=#1e1e1f]#{?#{==:#{TMUX_ICON_MODE},nerd},#{@sep-right-nerd},#{@sep-right-ascii}}\
#[fg=#1e1e1f]#[bg=#a1e8e5]#[bold] \
#{?#{==:#{TMUX_ICON_MODE},nerd},#{@icon-host-nerd} ,#{@icon-host-ascii}}\
#[fg=#1e1e1f]#H \
#[fg=#8fc7ff]#[bg=#1e1e1f]#{?#{==:#{TMUX_ICON_MODE},nerd},#{@sep-right-nerd},#{@sep-right-ascii}}\
#[fg=#1e1e1f]#[bg=#8fc7ff]#[bold] \
#{?#{==:#{TMUX_ICON_MODE},nerd},#{@icon-clock-nerd} ,}\
#[fg=#1e1e1f]%Y-%m-%d %H:%M "

# Minimal status right (focus mode)
set -g @status-right-minimal ""

# Conditional status right based on focus mode
set -g status-right "#{?#{==:#{TMUX_FOCUS_MODE},1},#{@status-right-minimal},#{@status-right-full}}"

# ============================================================================
# Optional Key Bindings
# ============================================================================
# Add these to your ~/.tmux.conf if you want them:
#
# Toggle Focus Mode: prefix + F
# bind-key F if-shell '[ "$(tmux show-environment -g TMUX_FOCUS_MODE | cut -d= -f2)" = "1" ]' \
#     'setenv -g TMUX_FOCUS_MODE 0; display-message "Focus Mode: OFF"' \
#     'setenv -g TMUX_FOCUS_MODE 1; display-message "Focus Mode: ON"'
#
# Toggle Icon Mode: prefix + I
# bind-key I if-shell '[ "$(tmux show-environment -g TMUX_ICON_MODE | cut -d= -f2)" = "nerd" ]' \
#     'setenv -g TMUX_ICON_MODE ascii; display-message "Icon Mode: ASCII"' \
#     'setenv -g TMUX_ICON_MODE nerd; display-message "Icon Mode: Nerd Fonts"'

# ============================================================================
# End of Maple Dark Theme Configuration
# ============================================================================
# Note: This theme file only sets colors and status bar styling.
# It does NOT modify tmux behavior settings like:
# - Mouse support
# - Window/pane numbering
# - History limits
# - Terminal settings
# - Activity monitoring
# - Escape time
#
# Add your preferred configuration settings to your own ~/.tmux.conf
# ============================================================================

